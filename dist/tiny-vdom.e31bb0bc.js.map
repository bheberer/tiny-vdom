{"version":3,"sources":["index.js"],"names":["elem","type","props","children","node","document","createElement","Object","entries","k","v","i","j","style","forEach","child","append","render","element","target","targetNode","querySelector","firstChild","removeChild","counterApp","prevState","state","count","setState","newState","undefined","decrementHandler","incrementHandler","onclick","app","component","getState","effect","func","deps","listItems","checked","value","filter","TodoList","console","log","title","toggleFilter","e","event","toggleItem","newList","map","item","id","getFilteredItems","name","for","display","TodoListItem","text"],"mappings":"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","file":"tiny-vdom.e31bb0bc.js","sourceRoot":"..","sourcesContent":["/* \r\nTODO:\r\ndiffing algorithm\r\n*/\r\n\r\n// generates a dom node w/ children and attributes\r\nexport function elem(type, props = {}, children = []) {\r\n\tlet node = document.createElement(type);\r\n\r\n\tfor (const [k, v] of Object.entries(props)) {\r\n\t\tif (k === 'style') {\r\n\t\t\tfor (const [i, j] of Object.entries(props[k])) {\r\n\t\t\t\tnode.style[i] = j;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tnode[k] = v;\r\n\t\t}\r\n\t}\r\n\r\n\tchildren.forEach(child => {\r\n\t\tnode.append(child);\r\n\t});\r\n\r\n\treturn node;\r\n}\r\n\r\n// // renders generated elements to a dom target. Simple right now, no diffing, just replaces the entire tree.\r\nexport function render(element, target) {\r\n\tlet targetNode = document.querySelector(target);\r\n\twhile (targetNode.firstChild) {\r\n\t\ttargetNode.removeChild(targetNode.firstChild);\r\n\t}\r\n\ttargetNode.append(element);\r\n\treturn targetNode;\r\n}\r\n\r\n// basic stateful counter application\r\nfunction counterApp(props, prevState) {\r\n\tlet state = prevState || {\r\n\t\tcount: 0\r\n\t};\r\n\r\n\tconst setState = newState => {\r\n\t\tstate = {\r\n\t\t\t...state,\r\n\t\t\t...newState\r\n\t\t};\r\n\t\trender(counterApp(undefined, state), '#app');\r\n\t};\r\n\r\n\tconst decrementHandler = () => {\r\n\t\tsetState({ count: state.count - 1 });\r\n\t};\r\n\r\n\tconst incrementHandler = () => {\r\n\t\tsetState({ count: state.count + 1 });\r\n\t};\r\n\r\n\treturn elem('div', undefined, [\r\n\t\telem(\r\n\t\t\t'button',\r\n\t\t\t{\r\n\t\t\t\tonclick: incrementHandler\r\n\t\t\t},\r\n\t\t\t['+']\r\n\t\t),\r\n\t\telem('p', undefined, [state.count]),\r\n\t\telem(\r\n\t\t\t'button',\r\n\t\t\t{\r\n\t\t\t\tonclick: decrementHandler\r\n\t\t\t},\r\n\t\t\t['-']\r\n\t\t)\r\n\t]);\r\n}\r\n\r\nfunction app(state, component) {\r\n\tthis.state = this.state || state;\r\n\r\n\treturn {\r\n\t\tgetState: () => this.state,\r\n\t\tsetState: newState => {\r\n\t\t\tthis.state = {\r\n\t\t\t\t...this.state,\r\n\t\t\t\t...newState\r\n\t\t\t};\r\n\t\t\trender(component(undefined, this.state), '#app');\r\n\t\t},\r\n\t\teffect: (func, deps) => {\r\n\t\t\tif (this.deps) {\r\n\t\t\t\tfor (const [k, v] of Object.entries(this.deps)) {\r\n\t\t\t\t\tif (deps[k] !== this.deps[k]) {\r\n\t\t\t\t\t\tthis.deps = {\r\n\t\t\t\t\t\t\t...deps\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\treturn func();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn;\r\n\t\t\t} else {\r\n\t\t\t\tthis.deps = deps;\r\n\t\t\t\treturn func();\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nlet { getState, setState, effect } = new app(\r\n\t{\r\n\t\tlistItems: [\r\n\t\t\t{\r\n\t\t\t\tchecked: false,\r\n\t\t\t\tvalue: 'Clean Room'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tchecked: false,\r\n\t\t\t\tvalue: 'Do Homework'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tchecked: false,\r\n\t\t\t\tvalue: 'Study for test'\r\n\t\t\t}\r\n\t\t],\r\n\t\tfilter: false\r\n\t},\r\n\tTodoList\r\n);\r\n\r\n// canonical todo app\r\nfunction TodoList(props) {\r\n\tlet state = getState();\r\n\r\n\teffect(\r\n\t\t() => {\r\n      console.log('yo')\r\n\t\t\tdocument.title = state.filter;\r\n\t\t},\r\n\t\t{ filter: state.filter }\r\n\t);\r\n\r\n\tlet toggleFilter = e => {\r\n\t\tsetState({ filter: event.target.checked });\r\n\t};\r\n\r\n\tlet toggleItem = e => {\r\n\t\tlet newList = state.listItems.map((item, i) =>\r\n\t\t\ti == e.target.id ? { ...item, checked: !item.checked } : item\r\n\t\t);\r\n\t\tsetState({ listItems: newList });\r\n\t};\r\n\r\n\tlet getFilteredItems = () => state.listItems.filter(item => !(state.filter && item.checked));\r\n\r\n\treturn elem('div', undefined, [\r\n\t\telem('div', undefined, [\r\n\t\t\telem('input', {\r\n\t\t\t\ttype: 'checkbox',\r\n\t\t\t\tid: 'filter',\r\n\t\t\t\tname: 'filter',\r\n\t\t\t\tonclick: toggleFilter,\r\n\t\t\t\tchecked: state.filter\r\n\t\t\t}),\r\n\t\t\telem('label', { for: 'filter' }, ['Hide Finished'])\r\n\t\t]),\r\n\t\t...getFilteredItems().map((item, i) =>\r\n\t\t\telem(\r\n\t\t\t\t'div',\r\n\t\t\t\t{ style: { display: 'flex' } },\r\n\t\t\t\titem.checked\r\n\t\t\t\t\t? [\r\n\t\t\t\t\t\t\tTodoListItem({ text: item.value, id: i, onclick: toggleItem }),\r\n\t\t\t\t\t\t\telem('div', undefined, ['üëç'])\r\n\t\t\t\t\t  ]\r\n\t\t\t\t\t: [TodoListItem({ text: item.value, id: i, onclick: toggleItem })]\r\n\t\t\t)\r\n\t\t)\r\n\t]);\r\n}\r\nfunction TodoListItem({ text, id, onclick }) {\r\n\treturn elem('div', { id, onclick }, [text]);\r\n}\r\nrender(new TodoList(), '#app');\r\n"]}